# 功能测试指南

## 测试环境准备

### 1. 启动服务

**后端服务：**
```bash
cd backend
python -m uvicorn app.main:app --reload --port 5001
```

**前端服务：**
```bash
cd frontend
npm run dev
```

### 2. 测试账号

| 角色 | 用户名 | 密码 | 说明 |
|------|--------|------|------|
| 管理员 | admin | admin123 | 用于审批教师注册 |
| 主账号教师 | main_teacher | teacher123 | 用于测试子账号管理、审批功能 |
| 待审批教师 | pending_teacher | teacher123 | 已创建，需要管理员审批 |
| 测试企业 | test_enterprise | enterprise123 | 用于测试企业相关功能 |

## 功能测试清单

### 一、教师审批功能测试

**测试步骤：**
1. 使用管理员账号登录（`admin / admin123`）
2. 进入"教师审批"页面（`/admin/teacher-approvals`）
3. 查看待审批教师列表，应该能看到 `pending_teacher`
4. 点击"通过"按钮审批教师
5. 验证教师状态变为"活跃"

**预期结果：**
- ✅ 能正常显示待审批教师列表
- ✅ 审批操作成功
- ✅ 教师状态正确更新

### 二、双选会/宣讲会审批功能测试

**测试步骤：**

**双选会审批：**
1. 使用主账号教师登录（`main_teacher / teacher123`）
2. 进入"双选会管理"页面（`/teacher/job-fairs`）
3. 创建新的双选会（状态应为"待审批"）
4. 在双选会列表中，找到状态为"待审批"的双选会
5. 点击"审批"按钮
6. 选择"通过"或"拒绝"，填写审批意见
7. 提交审批
8. 验证双选会状态更新

**宣讲会审批：**
1. 进入"宣讲会管理"页面（`/teacher/info-sessions`）
2. 创建新的宣讲会（状态应为"待审批"）
3. 在宣讲会列表中，找到状态为"待审批"的宣讲会
4. 点击"审批"按钮
5. 选择"通过"或"拒绝"，填写审批意见
6. 提交审批
7. 验证宣讲会状态更新

**预期结果：**
- ✅ 教师创建的双选会/宣讲会状态为"待审批"
- ✅ 能正常显示审批按钮
- ✅ 审批操作成功
- ✅ 状态正确更新为"已发布"或"已拒绝"

### 三、子账号管理功能测试

**测试步骤：**
1. 使用主账号教师登录（`main_teacher / teacher123`）
2. 进入"子账号管理"页面（`/teacher/sub-accounts`）
3. 查看子账号列表（初始应为空）
4. 点击"创建子账号"按钮
5. 填写子账号信息：
   - 用户名：`sub_teacher_test`
   - 密码：`sub123456`
   - 真实姓名：`子账号教师`
   - 其他可选信息
6. 提交创建
7. 验证子账号出现在列表中
8. 测试删除子账号功能

**预期结果：**
- ✅ 能正常显示子账号列表
- ✅ 创建子账号成功
- ✅ 子账号信息正确显示
- ✅ 删除子账号成功

### 四、学校信息获取测试

**测试步骤：**
1. 使用主账号教师登录（`main_teacher / teacher123`）
2. 进入"我的院校"页面（`/teacher/departments`）
3. 查看学校信息是否正确显示
4. 验证学校名称、代码、地址等信息

**预期结果：**
- ✅ 学校信息正常显示
- ✅ 没有序列化错误
- ✅ 所有字段正确显示

### 五、学生管理功能测试

**测试步骤：**
1. 使用主账号教师登录（`main_teacher / teacher123`）
2. 进入"学生管理"页面（`/teacher/students`）
3. 查看学生列表
4. 测试搜索功能
5. 测试"点评"功能
6. 测试"移除"功能

**预期结果：**
- ✅ 学生列表正常显示
- ✅ 搜索功能正常
- ✅ 点评功能正常
- ✅ 移除功能正常

### 六、推荐人才功能测试

**测试步骤：**
1. 使用主账号教师登录（`main_teacher / teacher123`）
2. 进入"推荐人才管理"页面（`/teacher/talent-recommendations`）
3. 查看推荐列表
4. 点击"推荐人才"按钮
5. 填写推荐信息（职位ID、学生ID等）
6. 提交推荐
7. 验证推荐出现在列表中

**预期结果：**
- ✅ 推荐列表正常显示
- ✅ 推荐功能正常
- ✅ 推荐信息正确保存

### 七、学生点评功能测试

**测试步骤：**
1. 使用主账号教师登录（`main_teacher / teacher123`）
2. 进入"学生点评管理"页面（`/teacher/student-comments`）
3. 查看点评列表
4. 在学生管理页面，点击某个学生的"点评"按钮
5. 填写点评内容、评分、标签等
6. 提交点评
7. 验证点评出现在点评列表中

**预期结果：**
- ✅ 点评列表正常显示
- ✅ 创建点评成功
- ✅ 编辑和删除功能正常

## 测试检查点

### 前端检查点
- [ ] 页面加载正常，无404错误
- [ ] API请求正常，无500错误
- [ ] 数据正确显示
- [ ] 表单提交正常
- [ ] 模态框正常显示和关闭
- [ ] 分页功能正常
- [ ] 状态标签正确显示

### 后端检查点
- [ ] API响应正常
- [ ] 数据序列化正确（datetime字段）
- [ ] 权限控制正确
- [ ] 审批流程正常
- [ ] 数据保存正确

## 常见问题排查

### 1. 前端页面空白或404
- 检查后端服务是否运行（`http://localhost:5001`）
- 检查前端服务是否运行（`http://localhost:5173`）
- 检查浏览器控制台错误信息

### 2. API请求500错误
- 检查后端日志
- 检查数据库连接
- 检查数据序列化问题

### 3. 权限不足（403错误）
- 检查用户类型是否正确
- 检查token是否有效
- 检查权限配置

### 4. 数据不显示
- 检查是否有测试数据
- 运行 `python backend/scripts/create_test_data.py` 创建测试数据
- 检查数据库连接

## 测试报告模板

```
测试日期：YYYY-MM-DD
测试人员：[姓名]

【功能测试结果】
1. 教师审批功能：✅/❌
2. 双选会审批功能：✅/❌
3. 宣讲会审批功能：✅/❌
4. 子账号管理功能：✅/❌
5. 学校信息获取：✅/❌
6. 学生管理功能：✅/❌
7. 推荐人才功能：✅/❌
8. 学生点评功能：✅/❌

【发现的问题】
1. [问题描述]
2. [问题描述]

【建议改进】
1. [建议内容]
2. [建议内容]
```



